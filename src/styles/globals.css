@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Light theme */
  --background: 0 0% 100%;
  --foreground: 215 25% 27%;
  --muted: 210 40% 98%;
  --muted-foreground: 215 16% 47%;
  --border: 214 32% 91%;
  --input: 210 40% 96%;
  --primary: 199 89% 48%;
  --primary-foreground: 0 0% 100%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 215 25% 27%;
  --accent: 188 100% 50%;
  --accent-foreground: 215 25% 27%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --ring: 188 100% 50%;
  --radius: 0.75rem;
}

.dark {
  /* Dark theme */
  --background: 222 84% 5%;
  --foreground: 210 40% 98%;
  --muted: 215 28% 17%;
  --muted-foreground: 215 20% 65%;
  --border: 215 28% 17%;
  --input: 215 28% 17%;
  --primary: 199 89% 48%;
  --primary-foreground: 0 0% 100%;
  --secondary: 215 28% 17%;
  --secondary-foreground: 210 40% 98%;
  --accent: 188 100% 50%;
  --accent-foreground: 215 25% 27%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --ring: 188 100% 50%;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  transition: background-color 0.3s ease, color 0.3s ease;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  color: inherit;
  text-decoration: none;
}

/* Accessibility improvements */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus management */
*:focus {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

/* Motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --background: #000000;
    --foreground: #ffffff;
    --focus-ring: #ffff00;
  }
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  html {
    color-scheme: dark;
  }
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #1e293b; /* slate-800 */
}

::-webkit-scrollbar-thumb {
  background: #475569; /* slate-600 */
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #64748b; /* slate-500 */
}

/* Ensure interactive elements are keyboard accessible */
button,
[role="button"],
input,
select,
textarea,
[tabindex] {
  cursor: pointer;
}

button:disabled,
[aria-disabled="true"] {
  cursor: not-allowed;
}

/* Improve text readability */
p, span, div {
  line-height: 1.6;
}

/* Ensure sufficient color contrast for links */
a:focus {
  background-color: var(--focus-ring);
  color: var(--background);
  text-decoration: underline;
}

/* Safari Sticky Header Fix */
html.safari header.site-header {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  z-index: 999999 !important;
}

body.safari-pad {
  padding-top: var(--header-h, 4rem);
}

@media (min-width: 768px) {
  html.safari header.site-header {
    position: sticky !important;
  }
  body.safari-pad {
    padding-top: 0;
  }
}

/* Leaflet popup link styling */
.leaflet-popup-content a {
  color: rgb(8 145 178) !important; /* cyan-600 */
  text-decoration: underline !important;
  cursor: pointer;
}

.leaflet-popup-content a:hover {
  color: rgb(14 116 144) !important; /* cyan-700 */
}

.dark .leaflet-popup-content a {
  color: rgb(103 232 249) !important; /* cyan-400 */
}

.dark .leaflet-popup-content a:hover {
  color: rgb(165 243 252) !important; /* cyan-300 */
}
